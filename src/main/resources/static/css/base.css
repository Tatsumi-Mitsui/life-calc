@charset "UTF-8";

/* ===== 基本レイアウト ===== */
:root {
	/* カラー */
	--brand: #339900;	/* ヘッダーの緑 */
	--ink: #222;
	--muted: #666;
	--line: #e5e5e5;
	--bg: #fafafa;
	--white: #fff;
	--negative: #ff0033;
	--positive: #0033cc;	/* 計算結果の青 */
	--header-fg: #f7fff7;	/* 少し柔らかめの白 */

	/* 基準サイズ */
	--content-max: 1040px;
	--header-min: 56px;		/* モバイルでも44px超える安全圏 */
	--header-max: 80px;		/* ややゆったり */

	/* フォント */
	--font-sans-rounded: "Hiragino Maru Gothic ProN", "ヒラギノ丸ゴ ProN W4",
						 "Hiragino Sans", "ヒラギノ角ゴ ProN W3",
						 "Noto Sans JP", "Yu Gothic", "Yu Gothic UI",
						 "Meiryo", "Segoe UI", Roboto,
						 system-ui, -apple-system, BlinkMacSystemFont,
						 "Helvetica Neue", Arial, sans-serif;
	--font-sans-ui: system-ui, -apple-system, "Segoe UI", Roboto,
					"Noto Sans JP", "Hiragino Sans", "Yu Gothic UI",
					"Yu Gothic", "Meiryo", "Helvetica Neue", Arial, sans-serif;
}

*{ box-sizing: border-box; }
html,body {
	height: 100%;
}

body {
	margin: 0;
	color: var(--ink);
	background: var(--bg);
	font-family: var(--font-sans-rounded);	/* 既定フォント（丸ゴ寄り） */
	font-size: 18px;
	line-height: 1.7;
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
	font-variant-numeric: tabular-nums lining-nums;	/* 金額の桁揃え */
	letter-spacing: 0.02em;
}

/* UI寄りにする場合： <body class="use-ui-font"> */
body .use-ui-font {
	font-family: var(--font-sans-ui);
}

/* ===== ヘッダー / フッター ===== */
/* ヘッダー常時上固定 + 下境界をうっすら */
header {
	position: sticky;
	top: 0;
	z-index: 1000;
	box-shadow: 0 1px 0 rgba(255, 255, 255, 0.15) inset, 0 1px 6px rgba(0, 0, 0, 0.06);
	background: var(--brand);
	color: var(--header-fg);
}

/* 中央寄せコンテナ + 3カラム（左 / 中央 / 右） */ 
header .inner.header-grid {
	margin: 0 auto;
	padding: 0 20px;
	min-height: clamp(var(--header-min), 6vw, var(--header-max));
	display: grid;
	grid-template-columns: 1fr auto 1fr;
	align-items: center;
	gap: 16px;
}

/* 左：メニューは左寄せ、リンク間に余白 */
header .menu {
	grid-column: 1;
	justify-self: start;
	display: flex;
	align-items: center;
	gap: 14px;
	padding-left: 12px;
	flex-wrap: wrap;
}

header .menu .link[aria-current="page"] {
	text-decoration: underline;
	text-underline-offset: 3px;
	background: rgba(255, 255, 255, 0.08);
	border-radius: 6px;
}

/* 中央：ロゴは常にセンター */
header .logo {
	grid-column: 2;
	justify-self: center;
	color: var(--header-fg);
	text-decoration: none;
	font-weight: 700;
	/* 画面幅に応じてロゴを少しだけ可変 */
	font-size: clamp(22px, 2.2vw, 28px);
	letter-spacing: 0.02em;
	line-height: 1;
}

/* 右：認証は右寄せ、間隔しっかり */
header .auth {
	grid-column: 3;
	justify-self: end;
	display: flex;
	align-items: center;
	gap: 20px;			/* ログインとサインアップの間隔はここで調整 */
	padding-right: 20px;
	flex-wrap: wrap;	/* ユーザー名が長くても崩れにくい */
}


/* 共通リンク */
header .link,
header .link-btn,
header .menu .link {
	padding: 10px 12px ;
}

header .link,
header .link-btn {
	color: var(--header-fg);
	text-decoration: none;
	font-weight: 600;
	/* タップしやすさを担保（44px目安） */
	line-height: 1;
	border-radius: 6px;
	transition: opacity 0.15s, text-decpration-color 0.15s;
}

header .link:hover,
header .link-btn:hover {
	text-decoration: underline;
	text-underline-offset: 3px;
}

/* ボタンをリンク風に */
header .link-btn {
	background: transparent;
	border: 0;
	cursor: pointer;
	font: inherit;
	padding-inline: 10px;
}

header .hello {
	opacity: 0.9;
	padding: 6px 0;
}

/* フッター */
footer {
	background-color: var(--brand);
	color: #fff;
	text-align: center;
	padding: 14px 12px;
	margin-top: 32px;
	font-size: 0.9rem;
}

/* ===== タイトル等 ===== */
h2 {
	margin: 20px 0 8px;
	font-size: 24px;
}

.description {
	color: var(--muted);
	margin: 0 0 16px;
}

/* ===== 2カラムレイアウト（Grid） ===== */
.page-grid {
	max-width: clamp(960px, 96vw, 1280px);
	margin: 0 auto;
	padding:  24px 24px;
	display: grid;
	grid-template-columns: 11fr 4fr;	/* 左：メイン　右：履歴 */
	gap: 24px;
	align-items: start;
}

.main-pane, .history-pane {
	min-width: 0;
}

/* 画面がかなり狭いときは1カラムに */
@media (max-width: 900px) {
	.page-grid {
		grid-template-columns: 1fr;
	}
}

/* ===== フォーム共通 ===== */
form {
	background: transparent;
}

.input-block {
	margin: 16px 0;
}

.input-block > label {
	display: block;
	margin-bottom: 6px;
	font-weight: 600;
}

.input-row {
	display: flex;	/* 金額の￥と入力を横並び */
	align-items: center;
	gap: 8px;
}

.input-row > span {
	color: var(--ink);
	font-weight: 700;
}

/* 入力欄 */
.input-row input[type="number"],
.input-row input[type="text"] {
	width: 100%;
	max-width: 520px;
	font-size: 18px;
	padding: 10px 16px;
	line-height: 1.6;
	border: 1px solid var(--line);
	border-radius: 8px;
	background: var(--white);
	text-align: right;	/* 数字は右寄せ */
	font-variant-numeric: tabular-nums;
}

input:focus {
	outline: none;
	border-color: var(--positive);
	box-shadow: 0 0 0 3px rgba(45,108,223,0.15);
}

/* プレースホルダー */
.input-row input::placeholder {
	color: #aaa;
	font-style: italic;
}

/* number の上下ボタンを消す（Chrome/Edge/Safari/Firefox） */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
	-webkit-appearance: none;
	margin: 0;
}

input[type="number"] {
	-moz-appearance: textfield;
	appearance: textfield;
}

/* バリデーションメッセージ */
.field-error {
	color: var(--negative);
	font-size: 13px;
	margin-top: 6px;
}

/* ===== 固定費の追加・削除ボタン ===== */
.add-button-wrapper {
	margin: 10px 0;
}

.add-btn, .delete-btn {
	appearance: none;
	border: none;
	background: transparent;
	cursor: pointer;
	line-height: 1;
	padding: 6px;
	border-radius: 999px;
}

.add-btn .icon-plus {
	font-size: 28px;
	color: #0099ff;
}

/* 入力行右端の削除ボタン：へこみ感を消し、縦位置を揃える */
.input-row .delete-btn {
	align-self: center;
	margin-left: 8px;
}

.input-row .delete-btn .icon-minus {
	font-size: 22px;
	color: var(--negative);
}

/* ===== アクション行（計算・保存 横並び＆中央） ===== */
.actions {
	display: flex;
	justify-content: center;
	align-items: center;
	gap: 12px;
	margin-top: 16px;
}

.actions .submit-btn,
.actions .save-btn {
	appearance: none;
	border: none;
	cursor: pointer;
	border-radius: 12px;
	padding: 12px 18px;
	font-size: 16px;
	font-weight: 600;
	box-shadow: 0 1px 0 rgba(0,0,0,0.05);
	min-width: 120px;
}

/* 計算ボタン */
.actions .submit-btn {
	background: #66cc00;
	color: #fff;
}

.actions .submit-btn:hover {
	filter: brightness(0.95);
}

/* 保存ボタン */
.actions .save-btn {
	background: #2563eb;
	color: #fff;
}

.actions .save-btn:hover {
	filter: brightness(0.96);
}

/* ===== 入力列を中央寄せ（計算エリア内） ===== */
.main-pane form#calc-form .input-block,
.main-pane form#calc-form .add-button-wrapper {
	max-width: 520px;	/* 入力列の見た目幅 */
	margin-left: auto;
	margin-right: auto;
}

/* ===== 計算結果パネル ===== */
.result-area {
	border: 1px solid var(--line);
	border-radius: 8px;
	padding: 16px 18px;
	background: var(--white);
	margin-top: 16px;
	max-width: 520px;
	margin-left: auto;
	margin-right: auto;
}

.result-area h3 {
	margin: 0 0 1.5em;	/* 見出し下：1.5em */
}

.result-row {
	display: flex;
	align-items: baseline;
	justify-content: space-between;
	gap: 12px;
	margin: 0 0 0.8em;	/* ラベル ↔ 金額 の間は0.5～0.8emの上限寄り */
}

/* ラベル側は折り返し防止 */
.result-row > span:first-child {
	white-space: nowrap;
}

.result-row .value {
	min-width: 10ch;
	text-align: right;	/* ラベルの下に金額を改行表示 */
	padding-left: 2em;	/* 金額のインデント（全角約2文字分） */
	font-size: 20px;
	font-variant-numeric: tabular-nums;
}

/* 金額の色 */
.result-row .value.positive,
.result-row .value.positive * {
	color: var(--positive);
}

.result-row .value.negative,
.result-row .value.negative * {
	color: var(--negative);
}

/* ===== 履歴（右カラム） ===== */
.history-header {
	display: flex;
	justify-content: space-between;
	align-items: flex-end;
	margin: 4px 0 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--line);
}

/* 後でCSV出力ボタンを置く */
.csv-placeholder {
	min-height: 32px;
}

.history-list {
	display: grid;
	gap: 12px;
}

/* 履歴カード */
.history-card {
	border:1px solid var(--line);
	border-radius: 8px;
	padding: 12px 14px;
	background: var(--white);
}

.history-card .row {
	display: flex;
	align-items: baseline;
	gap: 12px;
	padding: 4px 0;
}

.history-card .row span:first-child {
	color: var(--muted);
	white-space: nowrap;
	flex: 0 0 auto;		/* 幅を固定 */
}

.history-card .row span:last-child {
	flex: 1 1 auto;		/* 伸縮可 */
	text-align: right;
	min-width: 8ch;		/* 小さすぎる崩れ防止 */
	font-variant-numeric: tabular-nums;
}

/* 使える変動費（強調行）の色を"親子共に適用" */
.history-card .row.result .num,
.history-card .row.result .num * {
	color: var(--positive);
	font-weight: 600;
}

.history-card .row.result .num.negative,
.history-card .row.result .num.negative * {
	color: var(--negative);
}

/* 履歴個別削除ボタン */
.history-card form .delete-btn {
	padding: 0;
	border: none;
	background: none;
	cursor: pointer;
	color: var(--muted);
	text-decoration: underline;
	font-size: 1.05rem;
}

.history-card form .delete-btn:hover {
	color: #0b57d0;
	filter: none;
}

/* 空表示 */
.history-empty {
	color: var(--muted);
	text-align: center;
	padding: 8px 0;
}

/* ===== 細かい調整 ===== */
.icon-plus, .icon-minus {
	vertical-align: middle;
}

/* モバイル対応（オプション） */
@media (max-width: 480px){
	header .inner.header-grid {
		padding: 0 12px;
		column-gap: 12px;
	}

	header .menu {
		gap: 10px;
	}

	header .auth {
		gap: 12px;
	}

	.input-row input[type="text"],
	.input-row input[type="number"] {
		width: 100%;
	}
}